<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.staticfile.org/react/16.4.0/umd/react.development.js"></script>
    <script src="https://cdn.staticfile.org/react-dom/16.4.0/umd/react-dom.development.js"></script>
    <script src="https://cdn.staticfile.org/babel-standalone/6.26.0/babel.min.js"></script>
</head>
<body>
    <div id="example"></div>

    <!-- 组件的生命周期可分为三个状态：
    1、Mounting  已插入真实DOM
    2、Updating  正在被重新渲染
    3、Unmounting 已移出真实DOM
     -->

<!-- 
     生命周期的方法：
     1、componentWillMount 在渲染前调用，在客户端也在服务端。
     2、componentDidMount  第一次渲染后调用，只在客户端。
     3、componentWillReceiveProps 在组件接收到一个新的prop时被调用，初始化render时不被调用。
     4、shouldComponentUpdate 返回一个布尔值，在组件接收到新的props或者state时被调用，初始化或使用forceUpdate时不被调用。
     5、componentWillUpdate  组件接收到新的props或者state但还没有render时被调用。在初始化时不会被调用。
     6、componentDidUpdate  组件完成更新后立即调用。在初始化时不会被调用。
     7、componentWillUnmount    在组件从 DOM 中移除之前立刻被调用。 -->

    <script type="text/babel">
        // 以下实例在 Hello 组件加载以后，通过 componentDidMount 方法设置一个定时器，每隔100毫秒重新设置组件的透明度，并重新渲染：
        class Hello extends React.Component {
            constructor(props) {
                super(props);
                this.state = {opacity:1.0};
            }

            // 第一次渲染后调用，只在客户端
            componentDidMount(){
                this.timer = setInterval(function(){
                    var opacity = this.state.opacity;
                    opacity -= 0.05;
                    if(opacity<0.1) {
                        opacity = 1.0
                    }
                    this.setState({
                        opacity:opacity
                    });
                }.bind(this),100);
            }

            render () {
                return(
                    <div style={{opacity:this.state.opacity}}>
                        Hello {this.props.name}
                    </div>
                );
            }
        }

        ReactDOM.render(
            <Hello name="harrison"/>,
            document.getElementById('example')
        ); 
    
    
    </script>
</body>
</html>